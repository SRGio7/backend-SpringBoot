<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Upload Produk</title>
</head>
<body>
<h2>Form Tambah Produk</h2>

<form id="productForm" enctype="multipart/form-data">
    <label>Nama Produk:</label><br>
    <input type="text" name="name" required><br><br>

    <label>Kuantitas:</label><br>
    <input type="number" name="quantity" required><br><br>

    <label>Harga:</label><br>
    <input type="number" name="price" required><br><br>

    <label>Category:</label><br>
    <select name="category" required>
        <option value="">--Please choose a category--</option>
        <option value="Cloth">Cloth</option>
        <option value="Electronics">Electronics</option>
        <option value="Fashion">Fashion</option>
        </select><br><br>1
    </select>



    <label>Gambar:</label><br>
    <input type="file" name="image_url" accept="image/*" required><br><br>

    <button type="submit">Upload</button>
</form>

<script>
    const form = document.getElementById('productForm');

    form.addEventListener('submit', async function (e) {
        e.preventDefault();

        const formData = new FormData();

        formData.append('name', form.name.value);
        formData.append('quantity', form.quantity.value);
        formData.append('price', form.price.value);
        formData.append('category', form.category.value);
        formData.append('image_url', form.image_url.files[0]);

        try {
            const response = await fetch('/product', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();
            alert('Produk berhasil diupload:\n' + JSON.stringify(result, null, 2));
            form.reset();

        } catch (error) {
            console.error('Upload gagal:', error);
            alert('Gagal mengupload produk');
        }
    });
</script>
</body>
</html>
